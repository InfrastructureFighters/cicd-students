
## Git Bisect — شناسایی کامیت باگ‌دار

دستور `git bisect` برای شناسایی خودکار کامیتی که باعث ایجاد یک باگ شده، استفاده می‌شود. در این راهنما به صورت گام‌به‌گام نحوه استفاده از این ابزار را بررسی می‌کنیم.

---

### 1. ایجاد فایل اولیه

ابتدا یک اسکریپت ساده ایجاد می‌کنیم:

```bash
vim script.sh

#!/bin/bash
echo "Hello"
```

سپس فایل را به Git اضافه و کامیت می‌کنیم:

```bash
git add script.sh
git commit -m "Add script.sh"
```

---

### 2. ایجاد تغییر دوم (نسخه سالم)

در مرحله بعد، تغییری سالم به فایل اضافه می‌کنیم:

```bash
#!/bin/bash
echo "Hello"
echo "class cicd"
```

و مجدداً تغییر را ذخیره می‌کنیم:

```bash
git add script.sh
git commit -m "Edit script.sh"
```

---

### 3. افزودن باگ (تغییر خراب)

اکنون یک تغییر باگ‌دار اعمال می‌کنیم:

```bash
#!/bin/bash
echo "hi"  # اینجا باگ ایجاد می‌شود
echo "class cicd"
```

و آن را نیز کامیت می‌کنیم:

```bash
git add script.sh
git commit -m "BUG: Change hello to hi"
```

---

### 4. شروع فرآیند Bisect

اکنون برای پیدا کردن کامیت مشکل‌دار از دستور `git bisect` استفاده می‌کنیم:

```bash
git bisect start
git bisect bad HEAD       # کامیت فعلی (دارای باگ)
git bisect good HEAD~1    # کامیت قبلی که مطمئن هستیم سالم است
```

---

### 5. بررسی وضعیت در هر مرحله

Git به صورت خودکار به وسط بازه بین دو کامیت می‌رود و از شما می‌خواهد اعلام کنید که آن نسخه خوب است یا بد:

- اگر نسخه فعلی سالم است:
  ```bash
  git bisect good
  ```

- اگر نسخه فعلی مشکل‌دار است:
  ```bash
  git bisect bad
  ```

این فرآیند ادامه پیدا می‌کند تا زمانی که Git کامیت دقیق ایجادکننده باگ را شناسایی کند.

---

### 6. خروج از حالت Bisect

پس از یافتن کامیت باگ‌دار، با دستور زیر از حالت bisect خارج شوید:

```bash
git bisect reset
```

---

### نکات پایانی

- می‌توانید برای تست خودکار، از یک اسکریپت تست استفاده کنید و از `git bisect run` بهره ببرید.
- ابزار `git bisect` یکی از روش‌های قدرتمند برای دیباگ کردن تاریخچه پروژه است، خصوصاً در مخازن بزرگ.
